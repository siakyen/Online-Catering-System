/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package agile;

import java.util.ArrayList;
import java.util.List;
import org.junit.After;
import org.junit.AfterClass;
import org.junit.Test;
import static org.junit.Assert.*;
import org.junit.Before;
import org.junit.BeforeClass;

/**
 *
 * @author xiaky
 */
public class ViewCartTest {

    static List<Item> foodList = new ArrayList<>();
    static Cart cart = new Cart();
    static Cart cartNull = null;
    static OrderItem orderItem = new OrderItem();

    public ViewCartTest() {
    }

    @BeforeClass
    public static void setUpClass() {
        Item food = new Item("F001", "Fry Rice", 13.5, "Food");
        Item beverage = new Item("B001", "Green Tea", 2.5, "Beverage");
        Item dessert = new Item("D001", "Oreo Cake", 11.9, "Dessert");

        OrderItem orderItem1 = new OrderItem(food, 1);
        OrderItem orderItem2 = new OrderItem(beverage, 2);
        OrderItem orderItem3 = new OrderItem(dessert, 1);

        cart.addItem(orderItem1);
        cart.addItem(orderItem2);
        cart.addItem(orderItem3);
        System.out.println("Setting it up !");
    }

    @Before
    public void setUp() {
        System.out.printf("\nTesting: ");
    }

    @After
    public void tearDown() {
        System.out.println("This testing is completed");
    }

    @Test
    public void testSubtotal() {
        System.out.println("Ttem Subtotal");

        double[] subTotal1 = {13.5, 5.0, 11.9};
        for (int i = 0; i < cart.itemList.size(); i++) {
            double result = cart.itemList.get(i).subtotal;
            assertEquals(subTotal1[i], result, 0.0);
        }

    }

    @Test
    public void testTotalAmount() {
        System.out.println("Cart Total Amount");
        double totalAmount = 30.4;
        double result = 0;
        for (OrderItem orderItem : cart.getItemList()) {
            result += orderItem.getSubtotal();
        }
        assertEquals(totalAmount, result, 0.0);
    }

    @Test
    public void testItem() {
        System.out.println("Item in Cart");
        String[] item = {"Fry Rice", "Green Tea", "Oreo Cake"};
        for (OrderItem orderItem : cart.getItemList()) {
            for (int i = 0; i < cart.itemList.size(); i++) {
                assertEquals(item[i],cart.itemList.get(i).item.itemName);
            }
        }
    }

    @Test
    public void testNotNullObject() {
        System.out.println("Not Null Object");
        assertNotNull(cart);
    }

    @AfterClass
    public static void tearDownClass() {
        System.out.println("\nAll the test is done !");
    }
}
